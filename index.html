<!DOCTYPE html>
<html lang="en">
<head>
	<title>Testing Strategy</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="node_modules/shower-ribbon/styles/screen-16x10.css">
	<link rel="stylesheet" href="a.css">
</head>
<body class="shower list">

	<header class="caption">
		<h1>Testing Strategy</h1>
		<p>Vlad Mystetskyi, Nik Savchenko, <br>eXelate, A Nielsen Company</p>
	</header>


	<section class="slide grid">
		<h2 class="shout">Testing Strategy</h2>
	</section>


	<section class="slide">
		<h2>Test types</h2>
		<ul>
			<li class="next">Unit tests</li>
			<li class="next">Component tests</li>
			<li class="next">Integration tests</li>
			<li class="next">E2E tests</li>
			<li class="next">Sanity tests</li>
		</ul>
	</section>


	<section class="slide">
		<h2>Conventions, concepts, patterns</h2>
		<ul>
			<li class="next">File Co-location</li>
			<li class="next">Reuse tests</li>
			<li class="next">Test Data</li>
			<li class="next">Page Object</li>
		</ul>
	</section>


	<section class="slide">
		<h2>File Co-location</h2>
		<ul>
			<li><b>For code</b><br>(view, actions, reducers, controllers, models, collections, etc.)</li>
			<li><b>For test</b><br>(specs, po, test, data, fixtures, etc.)</li>
		</ul>
		<p class="note">Some links:
			<a href="https://marmelab.com/blog/2015/12/17/react-directory-structure.html">React dir structure</a>,
			<a href="http://cliffmeyers.com/blog/2013/4/21/code-organization-angularjs-javascript">Code organization</a>
			<a href="http://islovely.co/posts/colocating-unit-tests/">Co-location Unit tests</a>
		</p>
	</section>


	<section class="slide">
		<h2>Reuse Tests</h2>
		<p>Example: <a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/master/src/main/modules/indexReport/seedsSelector/specs/SeedsSelectorTest.coffee">Seed Selector Test</a></p>
		<pre><code>checkHeaders: (<mark>checkData</mark>) ->
  test = this
   describe "Check header-bar rendering:", ->
     it 'should have correct selected seeds header', () ->
       expect(test.moSeedsSelector.getBemEl('seeds'))
			.toHaveText(<mark>checkData.seeds</mark>)
...</code></pre>
	</section>


	<section class="slide">
		<h2>Test Data</h2>
		<ul>
			<li>Don't hardcore Names, Ids, Check values, etc.</li>
			<li><a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/specs/indexReportTestData.coffee">Index Report Test Data</a></li>
			<li><a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/master/src/main/modules/indexReport/seedsSelector/specs/seedsSelectorTestData.coffee">Seed Selector Test Data</a></li>
		</ul>
	</section>


	<section class="slide">
		<h2>Page Object</h2>
		<ul>
			<li>We try to split out tests for reusable parts and use PageObject patterns not only for E2E tests, but for Component and Integrations as well.</li>
			<li><a href="http://webdriver.io/guide/testrunner/pageobjects.html">Page Object</a></li>
			<li><a href="https://www.thoughtworks.com/insights/blog/using-page-objects-overcome-protractors-shortcomings">Page Object Protractor</a></li>
			<li><a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/specs/IndexReportPageObject.coffee">Index Report Page Object</a></li>
			<li><a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/seedsSelector/specs/SeedsSelectorPageObject.coffee">Seed Selector Page Object</a></li>
			<li><a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/seedsSelector/specs/SeedsSelectorModuleObject.coffee">Module Object</a></li>
		</ul>
	</section>


	<section class="slide">
		<h2>Tests for ... ?</h2>
		<ul>
			<li class="next">New Component</li>
			<li class="next">New module/page/app</li>
			<li class="next">Small additional functionality at component</li>
			<li class="next">Additional functionality at current module</li>
			<li class="next">Old component</li>
			<li class="next">Old modules/pages/apps</li>
		</ul>
	</section>


	<section class="slide">
		<h2 class="shout">Unit Tests</h2>
	</section>


	<section class="slide">
		<h2>Unit tests for <a href="https://github.com/xl8/webapps-frontend-components/tree/master/src/main/shared/components/sort">Sort Component</a></h2>
		<pre><code>_onRenderStateChanged: ->
  @toggleSort(@state.get('isSort'), @state.get('isDesc'))
...
describe 'When call _onRenderStateChanged callback:', ->
  it 'should call toggleSort with isSort and isDesc params form renderState', ->
    spyOn(sortView, 'toggleSort')
    sortView._onRenderStateChanged()
	expect(sortView.toggleSort).<mark>toHaveBeenCalled()</mark>
...</code></pre>
	</section>


	<section class="slide">
		<h2>Code refactoring for make it testable</h2>
		<p>Example: <a href="https://github.com/xl8/webapps-frontend-components/tree/master/src/main/shared/components/sort">StackBar Component</a></p>
		<p>Original code:</p>
		<p><img src="pictures/testing/unitRefactor1.png"></p>
	</section>

	<section class="slide">
		<h2>Refactoring: step #1</h2>
		<p><img src="pictures/testing/unitRefactor2.png"></p>
		<p class="note">we still have @model - it mean for test different variants of values - widths we need to create a lot of instances of out class with different params.</p>
	</section>

	<section class="slide">
		<h2>Refactoring: step #2</h2>
		<p ><img src="pictures/testing/unitRefactor3.png"></p>
		<p class="note">Now we can test static stackBarWidth function logic for different cases without creating instances of our class.</p>
	</section>


	<section class="slide">
		<h2>Unit tests is not only functions</h2>
		<ul>
			<li class="next">Index Report Controller:
				<a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/IndexReportController.coffee">Code</a>,
				<a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/specs/controller/specs.coffee">Tests</a>,
				<a href="https://docs.google.com/document/d/1F2FzQwvqYCwqYOYNWC1I8QkZOf08aOhpsYTPaxbaY6U/edit#heading=h.7152vtt3w56e">Description</a>
			</li>

			<li class="next">Indexed Segments:
				<a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/indexedSegments/IndexedSegmentsCollection.coffee">Collection</a>,
				<a href="https://github.com/xl8/webapps-maxdmp-frontend/blob/develop/src/main/modules/indexReport/indexedSegments/IndexedSegmentsModel.coffee">Model</a>
				and <a href="https://github.com/xl8/webapps-maxdmp-frontend/tree/develop/src/main/modules/indexReport/indexedSegments/specs">Tests</a>
			</li>

 			<li class="next">Props Tools:
				<a href="https://github.com/xl8/webapps-frontend-components/blob/master/src/main/shared/components/tools/propsTool.coffee">Code</a>,
				<a href="https://github.com/xl8/webapps-frontend-components/tree/master/src/main/shared/components/tools/specs">Tests</a>,
				<a href="https://docs.google.com/document/d/1F2FzQwvqYCwqYOYNWC1I8QkZOf08aOhpsYTPaxbaY6U/edit#heading=h.kwa20m8doc6y">Description</a>
			</li>

		</ul>
	</section>



	<section class="slide">
		<h2 class="shout">Component tests</h2>
	</section>


	<section class="slide">
		<h2>What are we testing?</h2>
		<ul>
			<li class="next"><b>Initialization</b> (check state, type and value of main properties, sub-objects, classes, etc.)</li>
			<li class="next"><b>Rendering</b> (check $el, template, classes, texts, values at html)</li>
			<li class="next"><b>Sub-view</b> (tooltips, child views, etc)</li>
			<li class="next"><b>Actions</b> (click, change state, change input, etc.)</li>
		</ul>
		<p class="next"><a href="https://github.com/xl8/webapps-frontend-components/blob/master/src/main/shared/components/">Examples</a></p>
	</section>


	<section class="slide">
		<h2>Options and TestData IconTooltip Component</h2>
		<p class="place"><img src="pictures/testing/testData.png"></p>
	</section>


	<section class="slide">
		<p class="place"><img src="pictures/testing/testData1.png"></p>
	</section>


	<section class="slide">
		<p class="place"><img src="pictures/testing/testData2.png"></p>
	</section>


	<section class="slide">
		<p class="place"><img src="pictures/testing/testData3.png"></p>
	</section>


	<section class="slide">
		<p class="place"><img src="pictures/testing/testData4.png"></p>
	</section>




	<section class="slide">
		<h2 class="shout">Integration Tests</h2>
	</section>


	<section class="slide">
		<h2 class="shout">Tests for new functionality at current modules</h2>
	</section>






	<section class="slide">
		<h2>You have to add some cool quote at the end...</h2>
		<figure>
			<blockquote>
				<p>No amount of testing can prove a software right, a single test can prove a software wrong.</p>
			</blockquote>
			<figcaption>Amir Ghahrai, <a href="http://www.testingexcellence.com/author/amir-ghahrai/">Testing Excellence</a></figcaption>
		</figure>
	</section>


	<section class="slide">
		<h2>.. and some links :)</h2>
		<ul class="double">
			<li><a href="https://docs.google.com/document/d/14m6OhqTTaB2DokncrenT9mVtU1NB9MuDL6imgdh3T6c/edit#">Testing Pilot 1</a></li>
			<li><a href="https://docs.google.com/document/d/1NmYXteIgFU82dWW9piR1KdHYDgzgZgaw-qdsS3ubH5E/edit">Pilot 2 - Profilabe audiences</a></li>
			<li><a href="https://docs.google.com/document/d/1F2FzQwvqYCwqYOYNWC1I8QkZOf08aOhpsYTPaxbaY6U/edit#">Unit tests</a></li>
			<li><a href="https://docs.google.com/document/d/1WZyhlyrJHatHCOKKM-EVbdECJnJlKZamoDoPYE2yA1A/edit#">Index report page tests</a></li>

		</ul>
		<p class="note">Created with <a href="https://shwr.me/">Shower</a></p>
		<img class="place bottom right" width="100px" src="pictures/logo.png">
	</section>

	<div class="progress"></div>

	<script src="node_modules/shower-core/shower.min.js"></script>

</body>
</html>
